# Exploring Bias in Wikipedia Articles about Politicians

## Project Goal

The goal of this project is to explore the concept of bias in data using Wikipedia articles about politicians from different countries. By combining a dataset of Wikipedia articles with a dataset of country populations and utilizing the ORES machine learning service to estimate the quality of each article, we analyze how the coverage of politicians on Wikipedia and the quality of articles vary among countries and regions.

The analysis includes:

- Identifying countries with the greatest and least coverage of politicians on Wikipedia compared to their population.
- Identifying countries with the highest and lowest proportion of high-quality articles about politicians.
- Ranking geographic regions by articles-per-person and proportion of high-quality articles.

Through this project, we aim to understand the causes and consequences of biased data in large, complex data science projects.

You can reach the author, Manya Chadha at manyac@uw.edu regarding any further questions and clarifications.

---

## Data Sources and Licensing

### 1. Politician Data

- **Filename**: `politicians_by_country_AUG.2024.csv`
- **Description**: This dataset contains a list of Wikipedia article pages about politicians from various countries. It was generated by crawling the Wikipedia category ["Politicians by nationality"](https://en.wikipedia.org/wiki/Category:Politicians_by_nationality).
- **License**: Content is available under the [Creative Commons Attribution-ShareAlike 3.0 Unported License (CC BY-SA 3.0)](https://creativecommons.org/licenses/by-sa/3.0/).

### 2. Population Data

- **Filename**: `population_by_country_AUG.2024.csv`
- **Description**: This dataset contains population data for countries, downloaded from the [World Population Data Sheet](https://www.prb.org/international/indicator/population/table) published by the Population Reference Bureau.
- **License**: The data is publicly available and used according to the terms provided by the Population Reference Bureau.

### 3. Wikimedia Foundation Terms of Use

The data used from Wikipedia is subject to the [Wikimedia Foundation Terms of Use](https://foundation.wikimedia.org/wiki/Terms_of_Use/en).

---

## API Documentation

### 1. MediaWiki Action API

- **Purpose**: To retrieve the latest revision IDs of Wikipedia articles.
- **Endpoint**: `https://en.wikipedia.org/w/api.php`
- **Documentation**: [MediaWiki Action API](https://www.mediawiki.org/wiki/API:Main_page)
- **Usage in Project**: Used the `query` action with `prop=info` to obtain the `lastrevid` for each article.

### 2. ORES (Objective Revision Evaluation Service)

- **Purpose**: To get machine learning-based quality predictions for Wikipedia articles.
- **Endpoint**: `https://ores.wikimedia.org/v3/scores/{context}/{revid}/{model}`
- **Documentation**:
  - [ORES Documentation](https://www.mediawiki.org/wiki/ORES)
  - [ORES API Reference](https://ores.wikimedia.org/v3/)
- **Usage in Project**: Used the `articlequality` model to obtain quality assessments for articles based on their revision IDs.

---

## Data Files Created

### 1. Intermediary Data Files

#### a. `quality_labels.json`

- **Description**: A JSON file containing article titles and their corresponding quality labels as predicted by ORES.
- **Data Schema**:
  ```json
  {
    "article_title": "article_quality_label",
    ...
  }
  ```

### 2. Final Output File

#### a. `wp_politicians_by_country.csv`

- **Description**: A CSV file containing the merged dataset with the following columns:
- **Data Schema**:

  | Column Name     | Data Type | Description                                                  |
  |-----------------|-----------|--------------------------------------------------------------|
  | `article_title` | String    | Title of the Wikipedia article about a politician            |
  | `country`       | String    | The country associated with the politician                   |
  | `article_quality` | String  | The quality label assigned to the article by ORES            |
  | `revision_id`   | Integer   | The latest revision ID of the article                        |
  | `Population`    | Float     | Population of the country (in millions)                      |
  | `region`        | String    | The geographic region of the country                         |


#### b. `wp_countries-no_match.txt`

- **Description**: A text file listing countries that were present in one dataset but not in the other during the merging process.
- **Data Schema**:
  ```
  Country Name 1
  Country Name 2
  ...
  ```

---

## Data Schema and Description

### `wp_politicians_by_country.csv`

- **Columns**:

  - **`article_title`**: The title of the politician's Wikipedia article.
  - **`country`**: The country associated with the politician.
  - **`article_quality`**: The quality assessment label assigned by ORES. Possible values are:
    - `FA`: Featured Article
    - `GA`: Good Article
    - `B`: B-Class Article
    - `C`: C-Class Article
    - `Start`: Start-Class Article
    - `Stub`: Stub-Class Article
  - **`revision_id`**: The latest revision ID of the article.
  - **`Population`**: The population of the country in millions.
  - **`region`**: The geographic region of the country.

---

## Known Issues and Special Considerations

- **Duplicate Entries**:
  - Some politicians may appear multiple times due to being associated with multiple countries.
  - Duplicate articles with the same name and URL but different countries were identified and handled appropriately.

- **Missing Data**:
  - A small number of articles (8) did not have available `lastrevid` or quality scores from ORES.
  - Articles without `revision_id` or `article_quality` are marked accordingly in the dataset.

- **Data Limitations**:
  - **Language Bias**: The analysis is based on the English Wikipedia, which may not represent global coverage accurately due to language preferences.
  - **Population Data Currency**: Population figures are approximate and may not reflect the most current data.

- **API Rate Limits**:
  - The ORES API has rate limits, and throttling was implemented to respect these limits.
  - Requests were paused appropriately to prevent exceeding the allowed number of requests.

- **Unmatched Countries**:
  - Some countries in the politicians dataset did not have corresponding entries in the population dataset.
  - These countries are listed in the `wp_countries-no_match.txt` file.

- **Data Bias**:
  - The quality of articles as assessed by ORES may be influenced by various factors, including the number of contributors and editorial focus, introducing potential bias.

---

## How to Reproduce the Analysis

1. **Prerequisites**:
   - Python 3.x environment.
   - Required Python packages: `json`, `time`, `urllib.parse`, `requests`, `numpy`, `pandas`, `matplotlib`.
   - To install dependencies, run 
   ```
   pip install -r requirements.txt
   ```

2. **Datasets**:
   - Ensure the following files are in the working directory:
     - `politicians_by_country_AUG.2024.csv`
     - `population_by_country_AUG.2024.csv`

3. **Running the Notebook**:
   - Open the Jupyter notebook titled `main-workflow.ipynb`.
   - Run each cell sequentially to execute the code.
   - The code includes API calls; ensure you have internet access, necessary access tokens and respect API rate limits.

4. **Output Files**:
   - `quality_labels.json` will be created containing article quality labels.
   - `wp_countries-no_match.txt` will list countries without matching population data and is found in datasets folder.
   - `wp_politicians_by_country.csv` will be generated as the final merged dataset and is found in datasets folder.

---

## Additional Notes

- **Reflection**:
  - This project highlights the disparities in Wikipedia coverage and article quality among countries and regions.
  - The findings suggest potential biases in data availability and quality, influenced by factors such as language, internet accessibility, and editorial focus.

- **Contributions**:
  - Researchers using this dataset are encouraged to attribute the original sources and share any derivative works under the same license.

---

*This project complies with all licensing requirements and respects the terms of use of the data sources and APIs involved.*